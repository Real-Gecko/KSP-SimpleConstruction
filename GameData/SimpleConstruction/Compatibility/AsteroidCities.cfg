// AsteroidCities.cfg v1.0.1.0
// SimpleConstruction! (SCON)
// created: 09 Jan 2023
// updated: 

// THIS FILE: GPL-3.0  by [zer0Kerbal](https://github.com/zer0Kerbal)

@PART[kmac-grabber-philly-125,kmac-grabber-pad-250]:HAS[@MODULE[ModuleGrappleNode]:HAS[!MODULE[ELTarget]]]:NEEDS[KlockheedMartian/AsteroidCities,Launchpad,SimpleConstruction]:FOR[SimpleConstruction]
{
	tmp = #SCON-name
	@description = #$description$\n<color=orange>$tmp$.</color>
	!tmp = DELETE
	@tags = #$tags$ cck-el cck-sc

	MODULE
	{
		name = ELTarget
		TargetName = #autoLOC_500861
		TargetTransform = ArticulatedCap
		SpawnHeightOffset = 0.2
	}

	MODULE
	{
		name = ELWorkshop
		ProductivityFactor = 0.25
	}

	// Add Build Capability
	MODULE
	{
		name = ELLaunchpad
		SpawnTransform = LaunchPos
	}
}


@PART[kmac-refinery-250]:NEEDS[KlockheedMartian/AsteroidCities,LaunchPad,SimpleConstruction]:FOR[SimpleConstruction]
{
	tmp = #SCON-name
	@description = #$description$\n<color=orange>$tmp$.</color>
	!tmp = DELETE
	@tags = #$tags$ cck-el cck-sc

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = #EL_Metal-name // Metal
		StartActionName = #SCON-act-metal-strt // Start Metal Refining
		StopActionName = #SCON-act-metal-stop // Stop Metal Refining
		
		AutoShutdown = true
		TemperatureModifier
		{
			key = 0 50000
			key = 750 25000
			key = 1000 5000
			key = 1250 2500
			key = 2000 2500
			key = 4000 0
		}				
		GeneratesHeat = true
		DefaultShutoffTemp = 0.8
		ThermalEfficiency 
		{
			key = 0 0 0 0
			key = 500 0.9 0 0
			key = 1000 1.0 0 0
			key = 1250 0.9 0 0
			key = 1500 0.5 0 0
			key = 3000 0.0 0 0 
		}
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		UseSpecialistHeatBonus = true
		SpecialistHeatFactor = 0.1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
		resourceOutputName = #EL_Metal-name // Metal
		
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 2.0 // 2.5
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 200 // (more effecient)
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Metal
			Ratio = 1.0
			DumpExcess = false
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}

	MODULE:NEEDS[Karbonite]
	{
		name = ModuleResourceConverter
		ConverterName = #SCON-act-karbonite-name // Karbonite
		StartActionName = #SCON-act-karbonite-strt
		StopActionName = #SCON-act-karbonite-stop
		
		AutoShutdown = true
		TemperatureModifier
		{
			key = 0 50000
			key = 750 25000
			key = 1000 5000
			key = 1250 2500	
			key = 2000 2500	
			key = 4000 0
		}				
		GeneratesHeat = true
		DefaultShutoffTemp = 0.8
		ThermalEfficiency 
		{
			key = 0 0 0 0
			key = 500 0.9 0 0
			key = 1000 1.0 0 0
			key = 1250 0.9 0 0
			key = 1500 0.5 0 0
			key = 3000 0.0 0 0 
		}
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		UseSpecialistHeatBonus = true
		SpecialistHeatFactor = 0.1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
		resourceOutputName = #EL_Metal-name // Metal
		
		INPUT_RESOURCE
		{
			ResourceName = Karbonite
			Ratio = 12
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 200 // more effecient
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Metal
			Ratio = 0.5
			DumpExcess = false
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}

	%RESOURCE[Metal]
	{
		&amount = 0
		&maxAmount = 20
		&FlowMode = 1
	}

	%RESOURCE[Ore]
	{
		&amount = 0
		&maxAmount = 40
		&FlowMode = 1
	}

	%RESOURCE[Karbonite]:NEEDS[Karbonite]
	{
		&amount = 0
		&maxAmount = 20
		&FlowMode = 1
	}
}