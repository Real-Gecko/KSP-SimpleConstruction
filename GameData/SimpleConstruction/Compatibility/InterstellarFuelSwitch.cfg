// InterstellarFuelSwitch.cfg v1.2.1.0
// SimpleConstruction! (SCON)
// created: 20 Apr 2020
// updated: 18 Jun 2023

// THIS FILE: GPL-3.0  by [zer0Kerbal](https://github.com/zer0Kerbal)

// need to factor in metal which has a volume of 1 instead of ore's 5 and rocketparts's 5

@PART[RadialOreTank,SmallTank,LargeTank]:NEEDS[InterstellarFuelSwitch,Launchpad,SimpleConstruction]:LAST[SimpleConstruction]
{
	tmp = #ABBV-IFS-info
	@description = #$description$\n<color=orange>$tmp$.</color>
	!tmp = DELETE

	@MODULE[InterstellarFuelSwitch]
    {
		tmpO = #autoLOC_501007 // Ore
		tmpM = #EL_Metal-name // Metal
		tmpR = #EL_RocketParts-name // Rocket Parts
		@tankSwitchNames = #$tankSwitchNames$;$tmpO$;$tmpM$;$tmpR$
        @resourceGui = #$resourceGui$;$tmpO$;$tmpM$;$tmpR$
		@resourceNames = #$resourceNames$;$tmpO$;$tmpM$;$tmpR$
		@resourceAmounts = #$resourceAmounts$;$../RESOURCE[Ore]/maxAmount$;$../RESOURCE[Ore]/maxAmount$;$../RESOURCE[Ore]/maxAmount$
		@fuelTankCounter += 3
		tankMass = #$../mass$
		basePartMass = 0.0
		displayCurrentTankCost = true
		hasGUI = true
		availableInFlight = true
		availableInEditor = true
		showInfo = true
		!tmpO = DELETE
		!tmpM = DELETE
		!tmpR = DELETE
	}
}

@PART[*]:HAS[@RESOURCE[Ore],#category[FuelTank],!MODULE[InterstellarFuelSwitch],!MODULE[ProceduralPart]]:NEEDS[InterstellarFuelSwitch,LaunchPad,SimpleConstruction,!B9PartSwitch]:FOR[SimpleConstruction]
{
	tmp = #ABBV-IFS-info
	@description = #$description$\n<color=orange>$tmp$.</color>
	!tmp = DELETE

	MODULE
	{
		tmpO = #autoLOC_501007 // Ore
		tmpM = #EL_Metal-name // Metal
		tmpR = #EL_RocketParts-name // Rocket Parts

	// shortDescr = #LOC_Xenonpatch_PM_short // #LOC_Xenonpatch_PM_short = Xenon tanks patch
	// longDescr = #LOC_Xenonpatch_PM_long // #LOC_Xenonpatch_PM_long = Adds various tank setups to all tanks holding Xenon.

		name = InterstellarFuelSwitch
		tankSwitchNames = $tmpO; $tmpM$; $tmpR$
		resourceGUI = $tmpO; $tmpM$; $tmpR$
		resourceNames = $tmpO; $tmpM$; $tmpR$
		resourceAmounts = #$../RESOURCE[Ore]/maxAmount$;$../RESOURCE[Ore]/maxAmount$;$../RESOURCE[Ore]/maxAmount$
		// @resourceAmounts[2,;] *= 2
		@fuelTankCounter += 3
		tankMass = #$../mass$
		basePartMass = 0.0
		displayCurrentTankCost = true
		hasGUI = true
		availableInFlight = true
		availableInEditor = true
		showInfo = true
		!tmpO = DELETE
		!tmpM = DELETE
		!tmpR = DELETE
	}
}